@page "/changecontrolform"
@using global::Core.Entities.Views;
@using global::Core.Entities;
@inject IMediator Mediator
@using Application.Queries;
@using MediatR


<EditForm Model="@Data" Context="EditFormContext">
    <DxFormLayout CssClass="w-100">
        <DxFormLayoutGroup ColSpanMd="12" Caption="SECTION A:CHANGE INFORMATION(To be filled by Initiator/PIC)" ExpandButtonDisplayMode="GroupExpandButtonDisplayMode.End" Expanded="false" AnimationType="LayoutAnimationType.Slide">
            <DxFormLayoutItem Caption="" ColSpanMd="6">
              
                <DxCheckBox @bind-Checked="@Data.IsInternalChanges" LabelPosition="LabelPosition.Right" >Internal Changes</DxCheckBox>
            </DxFormLayoutItem>
            <DxFormLayoutItem Caption="" ColSpanMd="6">

                <DxCheckBox @bind-Checked="@Data.IsAuthorityDirectedChanges" LabelPosition="LabelPosition.Right">Authority Directed Changes</DxCheckBox>
            </DxFormLayoutItem>

            <DxFormLayoutItem Caption="Initiator
                                       /PIC:" >
                <DxComboBox Data="@applicationUsers"
                            NullText="Select PIC..."
                            FilteringMode="DataGridFilteringMode.Contains"
                            TextFieldName="UserName"
                            ValueFieldName="UserID"
                             @bind-Value="@Data.PIC"
                            ShowValidationIcon="true">
                </DxComboBox>


            </DxFormLayoutItem>
            <DxFormLayoutItem Caption="Date:" >


            </DxFormLayoutItem>
            <DxFormLayoutItem Caption="Department:" >
                <DxComboBox Data="@_departmentItems"
                            NullText="Select Department..."
                            FilteringMode="DataGridFilteringMode.Contains"
                            TextFieldName="DepartmentName"
                            ValueFieldName="DepartmentId"
                           
                            @bind-Value="@Data.DepartmentID"
                            ShowValidationIcon="true" CssClass="cw-480">
                            
                </DxComboBox>

            </DxFormLayoutItem>
            <DxFormLayoutItem Caption="Responsible Person/PIA:" >
                <DxComboBox Data="@applicationUsers"
                            NullText="Select PIA..."
                            FilteringMode="DataGridFilteringMode.Contains"
                            TextFieldName="UserName"
                            ValueFieldName="UserID"
                            @bind-Value="@Data.PIA"
                            ShowValidationIcon="true">
                </DxComboBox>
            </DxFormLayoutItem>
            <DxFormLayoutItem Caption="Change Related To:" ColSpanLg="4" ColSpanMd="12" >
                
            </DxFormLayoutItem>

            <DxFormLayoutItem Caption="" ColSpanLg="4" ColSpanMd="12">
                <DxCheckBox @bind-Checked="@Data.IsSiteTransfer" LabelPosition="LabelPosition.Right" CssClass="w-100">Site Transfer</DxCheckBox>
            </DxFormLayoutItem>

            <DxFormLayoutItem Caption="" ColSpanLg="4" ColSpanMd="12">
                <DxCheckBox @bind-Checked="@Data.IsProduct" LabelPosition="LabelPosition.Right">Product</DxCheckBox>
            </DxFormLayoutItem>

            <DxFormLayoutItem Caption="" ColSpanLg="4" ColSpanMd="12">
                <DxCheckBox @bind-Checked="@Data.IsEquipment" LabelPosition="LabelPosition.Right">Equipment</DxCheckBox>
            </DxFormLayoutItem>

            <DxFormLayoutItem Caption="" ColSpanLg="4" ColSpanMd="12">
                <DxCheckBox @bind-Checked="@Data.IsComposition" LabelPosition="LabelPosition.Right" >Composition</DxCheckBox>
            </DxFormLayoutItem>

            <DxFormLayoutItem Caption="" ColSpanLg="4" ColSpanMd="12">
                <DxCheckBox @bind-Checked="@Data.IsFacility" LabelPosition="LabelPosition.Right">Facility</DxCheckBox>
                    </DxFormLayoutItem>
            <DxFormLayoutItem Caption="" ColSpanLg="4" ColSpanMd="12">
                <DxCheckBox @bind-Checked="@Data.IsLayout" LabelPosition="LabelPosition.Right">Layout</DxCheckBox>
                    </DxFormLayoutItem>
            <DxFormLayoutItem Caption="" ColSpanLg="4" ColSpanMd="12">
                <DxCheckBox @bind-Checked="@Data.IsDocument" LabelPosition="LabelPosition.Right">Document</DxCheckBox>
                 </DxFormLayoutItem>
            <DxFormLayoutItem Caption="" ColSpanLg="4" ColSpanMd="12">
                <DxCheckBox @bind-Checked="@Data.IsProcess" LabelPosition="LabelPosition.Right">Process</DxCheckBox>
            </DxFormLayoutItem>
             <DxFormLayoutItem Caption="" ColSpanLg="4" ColSpanMd="12">

                <DxCheckBox @bind-Checked="@Data.IsControlParameter" LabelPosition="LabelPosition.Right">Control Paramenter</DxCheckBox>
                  </DxFormLayoutItem>
            <DxFormLayoutItem Caption="" ColSpanLg="4" ColSpanMd="12">
                <DxCheckBox @bind-Checked="@Data.IsBatchSize">Batch Size</DxCheckBox>
            </DxFormLayoutItem>
            <DxFormLayoutItem Caption="" ColSpanLg="4" ColSpanMd="12">
                <DxCheckBox @bind-Checked="@Data.IsHoldingTime" LabelPosition="LabelPosition.Right">Holding Time</DxCheckBox>
            </DxFormLayoutItem>
            <DxFormLayoutItem Caption="" ColSpanLg="4" ColSpanMd="12">
                <DxCheckBox @bind-Checked="@Data.IsRawMeterial" LabelPosition="LabelPosition.Right">Raw Material</DxCheckBox>
                </DxFormLayoutItem>
            <DxFormLayoutItem Caption="" ColSpanLg="4" ColSpanMd="12">
                <DxCheckBox @bind-Checked="@Data.IsArtwork" LabelPosition="LabelPosition.Right">ArtWork/Labelling</DxCheckBox>
            </DxFormLayoutItem>
            <DxFormLayoutItem Caption="" ColSpanLg="4" ColSpanMd="12">
                <DxCheckBox @bind-Checked="@Data.IsPackagingMaterial" LabelPosition="LabelPosition.Right" >Packaging Material</DxCheckBox>
                </DxFormLayoutItem>
                 <DxFormLayoutItem Caption="" ColSpanLg="4" ColSpanMd="12">
                <DxCheckBox @bind-Checked="@Data.IsVendor" LabelPosition="LabelPosition.Right">Vendor</DxCheckBox>
                  </DxFormLayoutItem>
            <DxFormLayoutItem Caption="" ColSpanLg="4" ColSpanMd="12">
                <DxCheckBox @bind-Checked="@Data.IsShelfLife" LabelPosition="LabelPosition.Right">Shelf Life</DxCheckBox>
            </DxFormLayoutItem>
            <DxFormLayoutItem Caption="" ColSpanLg="4" ColSpanMd="12">
                <DxCheckBox @bind-Checked="@Data.IsRegulatory" LabelPosition="LabelPosition.Right">Regulatory</DxCheckBox>
            </DxFormLayoutItem>
            <DxFormLayoutItem Caption="" ColSpanLg="4" ColSpanMd="12">
                <DxCheckBox @bind-Checked="@Data.IsReTestPeriod" LabelPosition="LabelPosition.Right">Re- Test Period</DxCheckBox>
                  </DxFormLayoutItem>
            <DxFormLayoutItem Caption="Others:"  ColSpanMd="12">
                <DxTextBox @bind-Text="@Data.Others"  />
            </DxFormLayoutItem>


            <DxFormLayoutItem Caption="Description of Proposed Change:" ColSpanMd="12">

                <DxMemo @bind-Text="@Data.DescriptionOfProposedChange" Rows="5" />
            </DxFormLayoutItem>
            <DxFormLayoutItem Caption="Justification:" ColSpanMd="12">
                  <DxMemo @bind-Text = "@Data.Justification" Rows="5"/>

            </DxFormLayoutItem>
            <DxFormLayoutItem Caption="Proposed Implementation Action:" ColSpanMd="12">
                <DxMemo @bind-Text="@Data.ProposedImplementationAction" Rows="5" />

            </DxFormLayoutItem>
            <DxFormLayoutItem Caption="Related Deviation to be Attached(if Any):" ColSpanMd="12">
                <DxMemo @bind-Text="@Data.RelatedDeviation" Rows="5" />

            </DxFormLayoutItem>
        </DxFormLayoutGroup>
    </DxFormLayout>
</EditForm>
<EditForm Model="@Data" Context="EditFormContext">
    <DxFormLayout CssClass="w-100">
        <DxFormLayoutGroup ColSpanMd="12" Caption="SECTION B:CHANGE EVALUATION" ExpandButtonDisplayMode="GroupExpandButtonDisplayMode.End" Expanded="false" AnimationType="LayoutAnimationType.Slide">
            <DxFormLayoutItem Caption="Status:" ColSpanMd="12">


            </DxFormLayoutItem>
            <DxFormLayoutItem Caption="Quality Assurance Classification Of Change:" ColSpanMd="12">


            </DxFormLayoutItem>
            <DxFormLayoutItem Caption="Comments:" ColSpanMd="12">


            </DxFormLayoutItem>
            <DxFormLayoutItem Caption="Releated Department For Evaluation:" ColSpanMd="12">


            </DxFormLayoutItem>
            <DxFormLayoutItem Caption="Evaluated By:" ColSpanMd="6">


            </DxFormLayoutItem>
            <DxFormLayoutItem Caption="Date:" ColSpanMd="6">


            </DxFormLayoutItem>
            <DxFormLayoutGroup Caption="*Section(s) below is to be filled is Proposed Change is Acceptable" ColSpanMd="12">
                <DxFormLayoutTabPages @bind-ActiveTabIndex="@ActiveTabIndex">
                    <DxFormLayoutTabPage Caption="REGULATORY">
                        <DxFormLayoutItem Caption="The Proposed Change Impact To:" ColSpanMd="12">

                        </DxFormLayoutItem>
                        <DxFormLayoutItem Caption="Details:" ColSpanMd="12">

                        </DxFormLayoutItem>
                        <DxFormLayoutItem Caption="Evaluated By:" ColSpanMd="6">


                        </DxFormLayoutItem>
                        <DxFormLayoutItem Caption="Date:" ColSpanMd="6">


                        </DxFormLayoutItem>
                    </DxFormLayoutTabPage>
                    <DxFormLayoutTabPage Caption="QUALITY CONTROL(QC)">
                        <DxFormLayoutItem Caption="The Proposed Change Impact To:" ColSpanMd="12">

                        </DxFormLayoutItem>
                        <DxFormLayoutItem Caption="Details:" ColSpanMd="12">

                        </DxFormLayoutItem>
                        <DxFormLayoutItem Caption="Evaluated By:" ColSpanMd="6">


                        </DxFormLayoutItem>
                        <DxFormLayoutItem Caption="Date:" ColSpanMd="6">


                        </DxFormLayoutItem>
                    </DxFormLayoutTabPage>

                    <DxFormLayoutTabPage Caption="PRODUCTION">
                        <DxFormLayoutItem Caption="The Proposed Change Impact To:" ColSpanMd="12">

                        </DxFormLayoutItem>
                        <DxFormLayoutItem Caption="Details:" ColSpanMd="12">

                        </DxFormLayoutItem>
                        <DxFormLayoutItem Caption="Evaluated By:" ColSpanMd="6">


                        </DxFormLayoutItem>
                        <DxFormLayoutItem Caption="Date:" ColSpanMd="6">


                        </DxFormLayoutItem>
                        </DxFormLayoutTabPage>

                    <DxFormLayoutTabPage Caption="ENGINEERING & MAINTENANCE">
                        <DxFormLayoutItem Caption="The Proposed Change Impact To:" ColSpanMd="12">

                        </DxFormLayoutItem>
                        <DxFormLayoutItem Caption="Details:" ColSpanMd="12">

                        </DxFormLayoutItem>
                        <DxFormLayoutItem Caption="Evaluated By:" ColSpanMd="6">


                        </DxFormLayoutItem>
                        <DxFormLayoutItem Caption="Date:" ColSpanMd="6">


                        </DxFormLayoutItem>
                        </DxFormLayoutTabPage>
                    <DxFormLayoutTabPage Caption="QUALITY ASSURANCE(QA)">
                        <DxFormLayoutItem Caption="The Proposed Change Impact To:" ColSpanMd="12">

                        </DxFormLayoutItem>
                        <DxFormLayoutItem Caption="Details:" ColSpanMd="12">

                        </DxFormLayoutItem>
                        <DxFormLayoutItem Caption="Evaluated By:" ColSpanMd="6">


                        </DxFormLayoutItem>
                        <DxFormLayoutItem Caption="Date:" ColSpanMd="6">


                        </DxFormLayoutItem>
                    </DxFormLayoutTabPage>

                    <DxFormLayoutTabPage Caption="STORE">
                        <DxFormLayoutItem Caption="The Proposed Change Impact To:" ColSpanMd="12">

                        </DxFormLayoutItem>
                        <DxFormLayoutItem Caption="Details:" ColSpanMd="12">

                        </DxFormLayoutItem>
                        <DxFormLayoutItem Caption="Evaluated By:" ColSpanMd="6">


                        </DxFormLayoutItem>
                        <DxFormLayoutItem Caption="Date:" ColSpanMd="6">


                        </DxFormLayoutItem>
                    </DxFormLayoutTabPage>

                    <DxFormLayoutTabPage Caption="OTHERS">
                        <DxFormLayoutItem Caption="The Proposed Change Impact To:" ColSpanMd="12">

                        </DxFormLayoutItem>
                        <DxFormLayoutItem Caption="Details:" ColSpanMd="12">

                        </DxFormLayoutItem>
                        <DxFormLayoutItem Caption="Evaluated By:" ColSpanMd="6">


                        </DxFormLayoutItem>
                        <DxFormLayoutItem Caption="Date:" ColSpanMd="6">


                        </DxFormLayoutItem>

                    </DxFormLayoutTabPage>

                </DxFormLayoutTabPages>
               
            </DxFormLayoutGroup>

        </DxFormLayoutGroup>
    </DxFormLayout>
</EditForm>
<EditForm Model="@Data" Context="EditFormContext">
    <DxFormLayout CssClass="w-100">
        <DxFormLayoutGroup ColSpanMd="12" Caption="SECTION C:CHANGE APPROVAL(To be filled by QA)" ExpandButtonDisplayMode="GroupExpandButtonDisplayMode.End" Expanded="false" AnimationType="LayoutAnimationType.Slide">
            <DxFormLayoutItem Caption="Change Approval:" ColSpanMd="12">


            </DxFormLayoutItem>
            <DxFormLayoutItem Caption="Comments(if Any):" ColSpanMd="12">


            </DxFormLayoutItem>
            <DxFormLayoutItem Caption="Verified By(Pharmacist):" ColSpanMd="6">


            </DxFormLayoutItem>
            <DxFormLayoutItem Caption="Date:" ColSpanMd="6">


            </DxFormLayoutItem>
         
        </DxFormLayoutGroup>
    </DxFormLayout>
</EditForm>
<EditForm Model="@Data" Context="EditFormContext">
    <DxFormLayout CssClass="w-100">
        <DxFormLayoutGroup ColSpanMd="12" Caption="SECTION D:CHANGE IMPLEMENTATION(* Attach Document Copy)" ExpandButtonDisplayMode="GroupExpandButtonDisplayMode.End" Expanded="false" AnimationType="LayoutAnimationType.Slide">

            <DxFormLayoutTabPages >
                <DxFormLayoutTabPage Caption="DISCONTINUE OF IMPLEMENTATION (if Applicable)">

                    <DxFormLayoutItem Caption="HOD Comments:" ColSpanMd="12">

                    </DxFormLayoutItem>
                    <DxFormLayoutItem Caption="HOD Signature:" ColSpanMd="6">

                    </DxFormLayoutItem>
                   
                    <DxFormLayoutItem Caption="Date:" ColSpanMd="6">


                    </DxFormLayoutItem>
                </DxFormLayoutTabPage>

                <DxFormLayoutTabPage Caption="QA VERIFICATION">
                    <DxFormLayoutItem Caption="Status:" ColSpanMd="12">

                    </DxFormLayoutItem>
                  
                    <DxFormLayoutItem Caption="Verified By:" ColSpanMd="6">


                    </DxFormLayoutItem>
                    <DxFormLayoutItem Caption="Date:" ColSpanMd="6">


                    </DxFormLayoutItem>
                </DxFormLayoutTabPage>

            </DxFormLayoutTabPages>
        </DxFormLayoutGroup>
    </DxFormLayout>
</EditForm>
<EditForm Model="@Data" Context="EditFormContext">
    <DxFormLayout CssClass="w-100">
        <DxFormLayoutGroup ColSpanMd="12" Caption="SECTION E:CHANGE CLOSURE(To be filled By QA)" ExpandButtonDisplayMode="GroupExpandButtonDisplayMode.End" Expanded="false" AnimationType="LayoutAnimationType.Slide">

            <DxFormLayoutItem Caption="All Completed:" ColSpanMd="12">


            </DxFormLayoutItem>
            <DxFormLayoutItem Caption="Activities Found Comments(if Any):" ColSpanMd="12">


            </DxFormLayoutItem>
            <DxFormLayoutItem Caption="Closed By(Pharmacist):" ColSpanMd="6">


            </DxFormLayoutItem>
            <DxFormLayoutItem Caption="Date:" ColSpanMd="6">


            </DxFormLayoutItem>
            <DxFormLayoutGroup Caption="*To be filled Completed Activities Not Satisfactory initially" ColSpanMd="12">
                <DxFormLayoutItem Caption="All Completed:" ColSpanMd="12">
                    
                </DxFormLayoutItem>
                <DxFormLayoutItem Caption="Activities Found Closed By(Pharmacist):" ColSpanMd="6">
                   
                </DxFormLayoutItem>
                <DxFormLayoutItem Caption="Date:" ColSpanMd="6">
                 
                </DxFormLayoutItem>
            </DxFormLayoutGroup>
        </DxFormLayoutGroup>
    </DxFormLayout>
</EditForm>
@code {
    int ActiveTabIndex { get; set; } = 1;
    CCFAInformation Data = new CCFAInformation();
    private List<ViewDepartment> _departmentItems;
    private List<ApplicationUser> applicationUsers;
    protected override async Task OnInitializedAsync()
    {

        _departmentItems = await Mediator.Send(new GetAllDepartmentQuery());
        applicationUsers = await Mediator.Send(new GetAllApplicationUserQuery());

    
    }
}
