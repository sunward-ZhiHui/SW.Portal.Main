@page "/Settings"
<div class="row align-items-end" style="border-top: 1px solid #d5d4d4; margin-top:10px;">
    <div class="cw-480 ch-220" style="margin-top:10px;">
        <DxFormLayout CssClass="w-100">
            <DxFormLayoutTabPages @bind-ActiveTabIndex="@ActiveTabIndex" RenderMode="TabsRenderMode.AllTabs" TabClick="OnTabClick">
                <DxFormLayoutTabPage Caption="General Access">
                    <GeneralOpenAccess @ref="refGeneralOpenAccess" AccessType="GeneralAccess"></GeneralOpenAccess>
                </DxFormLayoutTabPage>
                <DxFormLayoutTabPage Caption="DMS Access">
                    <DMSOpenAccess @ref="refDMSOpenAccess" AccessType="DMSAccess"></DMSOpenAccess>
                </DxFormLayoutTabPage>
                <DxFormLayoutTabPage Caption="Email Access">
                    <DMSOpenAccess @ref="refDMSOpenAccessEmailAccess" AccessType="EmailAccess"></DMSOpenAccess>
                </DxFormLayoutTabPage>
            </DxFormLayoutTabPages>
        </DxFormLayout>
    </div>
</div>
@code {
    private DMSOpenAccess? refDMSOpenAccess;
    private DMSOpenAccess? refDMSOpenAccessEmailAccess; private GeneralOpenAccess? refGeneralOpenAccess;
    int ActiveTabIndex { get; set; } = 0;
    async void OnTabClick(TabClickEventArgs e)
    {
        if (e.TabIndex == 0)
        {
            await refGeneralOpenAccess.loadMainData("GeneralAccess");
        }
        if (e.TabIndex == 1)
        {
            await refDMSOpenAccess.loadMainData("DMSAccess");
        }
        if (e.TabIndex == 2)
        {
            await refDMSOpenAccessEmailAccess.loadMainData("EmailAccess");
        }
        
    }
}
